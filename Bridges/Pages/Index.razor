@page "/{action?}/{comment?}/{from?}/{emailaddress?}"

@inject ICommentService commentService;

@using BridgesDomain.Model
@using BridgesService.Interfaces

<style>
    div.ex1 {
        width: 1000px;
        height: 410px;
        overflow-y: scroll;
    }
</style>

@{
    if (!string.IsNullOrEmpty(Action) && Action.ToLowerInvariant() == "savecomment")
    {
        commentService.AddComment(Comment, From, EmailAddress);
        <hr/>
        <img style="border: none; height: 45px; width: 45px;" src="Images/info.png"/>
        <msginfo>SUCCESS - Comment added</msginfo>
        <hr/>
    }
}

<body>
<br/>
    <div style="background-color: lightgoldenrodyellow; opacity: 0.8;">
        <h3>Welcome to our site.</h3>
        <hr />
        <p>Here you can view and read about bridges over the river Wear.</p>
        <br />
        <p>Please leave a comment below.</p>
        <p>Thanks for visiting the site.</p>
        <br/>
    </div>
<br/>
<div class="ex1">
    <table>
        <thead>
        <h6>
            <th>Comments</th>
            <th colspan="3" style="text-align: right;"><input type="button" id="tbnAddComment" onclick="AddComment();" value="Add" /></th>
        </h6>
        </thead>
        @foreach (Comment comment in commentService.GetAllComments().OrderByDescending(x => x.CommentDate))
        {
            <tr>
                <td style="width: 50px">@comment.CommentDate</td>
                <td style="width: 500px">@comment.CommentContent</td>
                <td>@comment.From</td>
                <td>@comment.EmailAddress</td>
            </tr>
        }
    </table>
</div>
<br/>
</body>

@code
{
    [Parameter]
    public string Action { get; set; }

    [Parameter]
    public string Comment { get; set; }
    [Parameter]
    public string From { get; set; }
    [Parameter]
    public string EmailAddress { get; set; }
}
